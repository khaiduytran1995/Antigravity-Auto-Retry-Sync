# üîç Ph√¢n T√≠ch ·ª®ng D·ª•ng SuperVeoTifo

## Th√¥ng Tin T·ªïng Quan

| Thu·ªôc T√≠nh | Gi√° Tr·ªã |
|------------|---------|
| **T√™n ·ª®ng D·ª•ng** | SuperVeo |
| **Phi√™n B·∫£n** | 1.9.3 |
| **Framework** | Tauri (Rust backend + Web frontend) |
| **Installer** | NSIS ([SuperVeo_1.9.3_x64-setup.exe](file:///d:/SuperVeoTifo/SuperVeo_1.9.3_x64-setup.exe)) |
| **Platforms** | Windows x64, macOS (Intel + ARM), Linux |
| **Dev Project** | `veo3_auto.pdb` |

---

## üèóÔ∏è Ki·∫øn Tr√∫c ·ª®ng D·ª•ng

```mermaid
flowchart TB
    subgraph Frontend["Frontend (Web/HTML)"]
        UI[Giao di·ªán ng∆∞·ªùi d√πng]
    end
    
    subgraph Backend["Backend (Rust/Tauri)"]
        Main[SuperVeo.exe]
        NodeHelper[nodehelper.exe]
    end
    
    subgraph Sidecar["Sidecar Scripts"]
        Capture[capture-sidecar.js]
        Node[node.exe]
    end
    
    subgraph External["External Services"]
        GoogleLabs[Google Labs/FX]
        ImagenFX[imagenfx.art API]
        GitHub[GitHub Releases]
    end
    
    UI --> Main
    Main --> NodeHelper
    NodeHelper --> Capture
    Capture --> Node
    Capture --> GoogleLabs
    Main --> ImagenFX
    Main --> GitHub
```

---

## üìÅ C·∫•u Tr√∫c Th∆∞ M·ª•c

| Th∆∞ m·ª•c/File | M√¥ t·∫£ |
|--------------|-------|
| [SuperVeo.exe](file:///d:/SuperVeoTifo/SuperVeo.exe) | ·ª®ng d·ª•ng ch√≠nh (~13MB) - Tauri binary |
| [nodehelper.exe](file:///d:/SuperVeoTifo/nodehelper.exe) | Helper node (~38MB) |
| [realesrgan-n.exe](file:///d:/SuperVeoTifo/realesrgan-n.exe) | Real-ESRGAN upscaler (~6MB) |
| `$PLUGINSDIR/` | NSIS plugins (installer) |
| `binaries/` | DLL dependencies (vcomp140) |
| `resources/models/` | AI upscaling models |
| `resources/scripts/` | Node.js sidecar scripts |

---

## üéØ Ch·ª©c NƒÉng Ch√≠nh

### 1. **VEO3 Video/Image Generation**
- T·ª± ƒë·ªông t·∫°o video/image AI th√¥ng qua Google Labs (labs.google/fx)
- H·ªó tr·ª£ 2 lo·∫°i action:
  - `VIDEO_GENERATION` - T·∫°o video
  - `IMAGE_GENERATION` - T·∫°o ·∫£nh (Flow)

### 2. **reCAPTCHA Enterprise Bypass**
- Site Key: `6LdsFiUsAAAAAIjVDZcuLhaHiDn5nnHVXVRQGeMV`
- URL Target: `https://labs.google/fx`
- S·ª≠ d·ª•ng `puppeteer-real-browser` ƒë·ªÉ bypass bot detection
- T·ª± ƒë·ªông retry v√† fallback khi g·∫∑p l·ªói 403

### 3. **Image Upscaling (RealESRGAN)**
H·ªó tr·ª£ c√°c model:
- `realesrgan-x4plus` (33MB) - Upscale x4 ch·∫•t l∆∞·ª£ng cao
- `realesrgan-x4plus-anime` (9MB) - T·ªëi ∆∞u cho anime
- `realesr-animevideov3-x2/x3/x4` - Upscale video anime

### 4. **Auto Update**
- Host: `github.com/realvux/toolveo`
- Manifest: `public/latest.json`
- Signature-based verification

---

## üîê H·ªá Th·ªëng X√°c Th·ª±c

### Backend API
| Endpoint | M√¥ t·∫£ |
|----------|-------|
| `https://imagenfx.art/api/v2/veo3/get-token` | L·∫•y token x√°c th·ª±c |

### Authentication Headers
```javascript
{
    'X-Device-ID': encryptedDeviceId,
    'X-App-Version': '1.0.0',
    'X-Signature': HMAC-SHA256(payload, 'took_veo3'),
    'X-Timestamp': timestamp,
    'Authorization': 'Bearer {token}'
}
```

### Signature Algorithm
```
payload = `${method}|${url}|${timestamp}|${rawDeviceId}|`
signature = HMAC-SHA256(payload, 'took_veo3')
```

---

## üåê Proxy Support

- HTTP/HTTPS proxy
- SOCKS5/SOCKS5h proxy  
- T·ª± ƒë·ªông test k·∫øt n·ªëi tr∆∞·ªõc khi s·ª≠ d·ª•ng
- Auto-fallback v·ªÅ direct connection khi proxy fail
- Format h·ªó tr·ª£:
  - `http://user:pass@host:port`
  - `socks5://host:port`
  - `host:port:user:pass`

---

## üìã Sidecar Commands

Script `capture-sidecar.js` nh·∫≠n commands qua stdin:

| Command | M√¥ t·∫£ |
|---------|-------|
| `GET_TOKENS <count>` | L·∫•y reCAPTCHA tokens |
| `RESTART_BROWSER` | Kh·ªüi ƒë·ªông l·∫°i browser |
| `RESET_PROXY` | Reset proxy flag |
| `PING` | Health check |
| `SHUTDOWN` | T·∫Øt browser v√† exit |

---

## ‚öôÔ∏è Environment Variables

| Variable | M√¥ t·∫£ |
|----------|-------|
| `VEO3_RAW_DEVICE_ID` | Device ID g·ªëc |
| `VEO3_DEVICE_ID` | Device ID ƒë√£ m√£ h√≥a |
| `VEO3_APP_VERSION` | Phi√™n b·∫£n app |
| `VEO3_AUTH_TOKEN` | Token x√°c th·ª±c |

---

## üîß Dependencies

### Node.js Modules (Sidecar)
- `puppeteer-real-browser` - Anti-detection browser
- `readline` - Command interface
- `socks` - SOCKS proxy support
- `ws` - WebSocket
- `zod` - Schema validation

### Tauri/Rust Backend
- TLS/SSL (bcrypt, crypt32)
- Windows APIs (kernel32, user32, gdi32, shell32)
- DWM (dwmapi) - Desktop Window Manager
- WebSocket (ws2_32)

---

## üé® Auto-Update System

### Update Manifest Structure
```json
{
  "version": "v1.9.3",
  "pub_date": "2026-01-27T...",
  "platforms": {
    "darwin-aarch64": { "signature": "...", "url": "..." },
    "darwin-x86_64": { "signature": "...", "url": "..." },
    "windows-x86_64": { "signature": "...", "url": "..." }
  }
}
```

### GitHub Releases URL Pattern
```
https://github.com/realvux/toolveo/releases/download/v{version}/SuperVeo_{version}_{arch}.{ext}
```

---

## üïµÔ∏è Deep Analysis - Secrets & Internals

### 1. Cryptographic Keys & Tokens

| Lo·∫°i Key | Gi√° Tr·ªã / Chi Ti·∫øt | C√¥ng D·ª•ng |
|----------|-------------------|-----------|
| **HMAC Request Key** | `took_veo3` | D√πng ƒë·ªÉ k√Ω `X-Signature` header cho m·ªçi API request. |
| **Response Verify Key** | `790b439fcbd64cb13b...57f6` | D√πng ƒë·ªÉ x√°c th·ª±c ch·ªØ k√Ω tr·∫£ v·ªÅ t·ª´ server (Response integrity). |
| **AES Algorithm** | `aes-0.8.4` (GCM/CBC) | D√πng ƒë·ªÉ m√£ h√≥a Device ID v√† c√°c th√¥ng tin nh·∫°y c·∫£m kh√°c. |
| **reCAPTCHA Site Key** | `6LdsFiUsAAAAAIjVDZ...GeMV` | Google Labs Enterprise reCAPTCHA key. |

---

### 2. API Endpoints Quan Tr·ªçng

- **Main VEO3 API**: `https://imagenfx.art/api/v2/veo3/`
- **Vertex Auth**: `https://imagenfx.art/api/v2/veo3/vertex/access-token` (Proxy t·ªõi Google Vertex AI)
- **License Server**: `https://api.cleoo.site/api/users/session` (X√°c th·ª±c ng∆∞·ªùi d√πng/gi·∫•y ph√©p)
- **Proxy Services**: 
  - `api.kiotproxy.com`
  - `proxyxoay.shop`
- **Session Auth**: `https://labs.google/fx/api/auth/session`

---

### 3. Tauri Internal Commands (RPC)

·ª®ng d·ª•ng s·ª≠ d·ª•ng c√°c l·ªánh n·ªôi b·ªô ƒë·ªÉ giao ti·∫øp gi·ªØa UI v√† Rust backend:
- `get_encrypted_device_id`: L·∫•y Device ID ƒë√£ m√£ h√≥a.
- `validate_user_session`: Ki·ªÉm tra phi√™n l√†m vi·ªác.
- `rotate_access_token`: ƒê·ªïi token truy c·∫≠p t·ª± ƒë·ªông.
- `call_kiotproxy_api`: G·ªçi API l·∫•y proxy m·ªõi.
- `consume_captcha_token`: S·ª≠ d·ª•ng token captcha ƒë√£ gi·∫£i.

---

### 4. C∆° Ch·∫ø M√£ H√≥a Device ID

·ª®ng d·ª•ng l·∫•y **Raw Device ID** (c√≥ th·ªÉ l√† MAC ho·∫∑c HWID), sau ƒë√≥ s·ª≠ d·ª•ng library `aes` trong Rust k√®m theo m·ªôt salt/key n·ªôi b·ªô ƒë·ªÉ t·∫°o ra `VEO3_DEVICE_ID`. Chu·ªói m√£ h√≥a n√†y sau ƒë√≥ ƒë∆∞·ª£c chuy·ªÉn th√†nh Base64 tr∆∞·ªõc khi g·ª≠i l√™n header `X-Device-ID`.

---

### 5. D·ªØ Li·ªáu L∆∞u Tr·ªØ (AppData)

- **ƒê∆∞·ªùng d·∫´n**: `%LOCALAPPDATA%\SuperVeo`
- **N·ªôi dung**: L∆∞u tr·ªØ logs, cache session, v√† c√°c th√¥ng tin c·∫•u h√¨nh proxy/license.

---

### 6. Obfuscation (L√†m r·ªëi m√£)

Ph√°t hi·ªán chu·ªói k√Ω t·ª± b·ªã l√†m r·ªëi trong binary:
`acm710m +,m',4b,-&'HmhhHbhb 722'6''0b -)',b #2670'b +&'!#0bj '01+16',6b -&'kHbhb...`
Chu·ªói n√†y c√≥ th·ªÉ l√† m·ªôt **Substitution Table** (B·∫£ng thay th·∫ø) ho·∫∑c m·ªôt c·∫•u h√¨nh Payload ƒë√£ ƒë∆∞·ª£c m√£ h√≥a ƒë∆°n gi·∫£n ƒë·ªÉ tr√°nh b·ªã scan chu·ªói.

---

## üìä T·ªïng K·∫øt N√¢ng Cao

SuperVeo kh√¥ng ch·ªâ l√† m·ªôt tool automation ƒë∆°n gi·∫£n m√† l√† m·ªôt h·ªá th·ªëng **Proxy & Bypass** ho√†n ch·ªânh:
1. **Bypass Captcha**: T√≠ch h·ª£p s·∫µn browser engine (`node.exe` + `puppeteer`) ƒë·ªÉ gi·∫£i captcha real-time.
2. **Proxy Management**: T√≠ch h·ª£p nhi·ªÅu d·ªãch v·ª• proxy Vi·ªát Nam (`kiotproxy`, `proxyxoay`).
3. **Security**: S·ª≠ d·ª•ng ch·ªØ k√Ω HMAC hai chi·ªÅu (c·∫£ request v√† response) ƒë·ªÉ ch·ªëng gi·∫£ m·∫°o API.
4. **Cloud Integration**: Ho·∫°t ƒë·ªông nh∆∞ m·ªôt Bridge gi·ªØa m√°y ng∆∞·ªùi d√πng v√† Google Vertex AI.
