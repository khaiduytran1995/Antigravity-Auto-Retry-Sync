# Giáº£i phÃ¡p Sá»­a lá»—i Auth v1.3.0 - Final Plan

## ğŸ” NguyÃªn nhÃ¢n xÃ¡c Ä‘á»‹nh

### Váº¥n Ä‘á» chÃ­nh:
v1.3.0 **THIáº¾U** logic gá»­i `session-status` IPC event sau khi check license:

**v1.2.9** (Working):
```
checkSavedLicense() 
  â†’ send('session-status', {...})      âœ… 
  â†’ send('credentials-updated', {...}) âœ…
```

**v1.3.0** (Broken):
```
checkSavedLicense()
  â†’ send('credentials-updated', {...}) âœ…
  âŒ THIáº¾U send('session-status')
```

### TÃ¡c Ä‘á»™ng:
- Frontend khÃ´ng nháº­n Ä‘Æ°á»£c `session-status` event
- UI khÃ´ng cáº­p nháº­t tráº¡ng thÃ¡i session
- KhÃ´ng láº¥y Ä‘Æ°á»£c cookies/token tá»« backend

---

## âœ… Giáº£i phÃ¡p Khuyáº¿n nghá»‹

### PhÆ°Æ¡ng Ã¡n: Copy main.js tá»« v1.2.9 + Re-apply bypass patch

**Æ¯u Ä‘iá»ƒm:**
- âœ… 100% Ä‘áº£m báº£o auth hoáº¡t Ä‘á»™ng (vÃ¬ dÃ¹ng code Ä‘Ã£ working)
- âœ… ÄÆ¡n giáº£n, Ã­t rá»§i ro
- âœ… Nhanh chÃ³ng (~10 phÃºt)

**NhÆ°á»£c Ä‘iá»ƒm:**
- âš ï¸ Máº¥t cÃ¡c cáº£i tiáº¿n má»›i trong v1.3.0 main.js (náº¿u cÃ³)

**Quyáº¿t Ä‘á»‹nh:** Do chá»‰ khÃ¡c nhau 3KB (4.16MB vs 4.15MB), cÃ¡c cáº£i tiáº¿n khÃ´ng Ä‘Ã¡ng ká»ƒ. **CHáº¤P NHáº¬N**.

---

## ğŸ› ï¸ CÃ¡c bÆ°á»›c thá»±c hiá»‡n

### 1. Backup current v1.3.0
```bash
copy main.js main.js.v130-broken-auth
```

### 2. Copy main.js tá»« v1.2.9
```bash
copy "d:\...\v1.2.9\...\main.js" "d:\...\v1.3.0\...\main.js"
```

### 3. Re-apply bypass license patch
Cháº¡y láº¡i script [bypass_license_v130.js](file:///d:/14012026Veo%20Automation%20Setup%201.2.1/Veo%20Automation%20Setup%201.3.0/resources/bypass_license_v130.js) vá»›i code tá»« v1.2.9:
- Patch [verifyLicense](file:///d:/14012026Veo%20Automation%20Setup%201.2.1/Veo%20Automation%20Setup%201.2.9/resources/license-backend/Code.gs#47-128)
- Patch `checkSavedLicense`
- Inject `SECRET_CONFIG`

### 4. Repack app.asar
```bash
npx -y @electron/asar pack app-extracted app.asar
```

### 5. Test
- Khá»Ÿi Ä‘á»™ng app
- ÄÄƒng nháº­p tÃ i khoáº£n Google
- Kiá»ƒm tra cookies/token Ä‘Æ°á»£c láº¥y Ä‘Ãºng
- Test táº¡o video

---

## ğŸ“‹ Checklist

- [x] PhÃ¢n tÃ­ch nguyÃªn nhÃ¢n
- [x] XÃ¡c Ä‘á»‹nh giáº£i phÃ¡p
- [ ] Backup v1.3.0 main.js
- [ ] Copy v1.2.9 main.js
- [ ] Re-apply bypass patch
- [ ] Repack app.asar  
- [ ] Test auth flow
- [ ] Verify táº¡o video

---

## â±ï¸ Timeline

- Backup & Copy: 2 phÃºt
- Re-apply patch: 3 phÃºt
- Repack: 1 phÃºt
- Test: 4 phÃºt

**Tá»•ng**: ~10 phÃºt

---

## ğŸ¯ Expected Outcome

Sau khi hoÃ n táº¥t:
- âœ… License bypass hoáº¡t Ä‘á»™ng
- âœ… Auth/cookies hoáº¡t Ä‘á»™ng 100% nhÆ° v1.2.9
- âœ… Táº¥t cáº£ tÃ­nh nÄƒng Ä‘áº§y Ä‘á»§
