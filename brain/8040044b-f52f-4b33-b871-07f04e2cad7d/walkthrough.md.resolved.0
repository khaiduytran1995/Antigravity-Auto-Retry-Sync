# Walkthrough: Analysis of Chichbong Image Tool (Imagen4)

I have completed a thorough analysis of the `chichbong_image` tool. Below is a detailed summary of the findings.

## 1. Application Architecture
- **Language**: Python 3.12
- **Packaging**: Frozen using `cx_Freeze`.
- **UI Framework**: PySide6 (Qt for Python).
- **Core Logic**: Contained within compiled [.pyc](file:///d:/chichbong_image/lib/services/__init__.pyc) files in `lib/components` and `lib/services`.

## 2. Core Service Components

### `LicenseService` (`lib/services/license_service_imagen.pyc`)
Responsible for managing application licenses.
- **Base URL**: `https://11labs.net` (referenced as fallback or base).
- **Key Methods**:
    - `verify_license`: Validates the license key and checks the current version.
    - `request_new_license`: Activates a new license using hardware ID, CPU ID, and Mainboard UUID.
    - `change_activation_email`: Allows users to update their registered email.

### `ApiImagenService` (`lib/services/api_imagen_service.pyc`)
Handles communication with the image generation backend.
- **Key Methods**:
    - `get_account_info`: Retrieves user status (VIP, usage limits).
    - `get_imagen4_tokens_via_license`: Fetches tokens required for image generation.
    - `get_payment_packages`: Lists available subscription tiers.
    - `create_payment_order`: Initiates a purchase flow.

### `TokenManager` (`lib/services/token_manager.pyc`)
Manages the lifecycle of API tokens.
- **Cache**: Stores tokens locally in `QSettings` to minimize API calls.
- **Integration**: Works with `ApiImagenService` to refresh tokens when they expire.

## 3. Backend Endpoints
The application communicates with the following API paths:

| Feature | Endpoint Path |
| :--- | :--- |
| **License Activation** | `/api/license/activate.php` |
| **License Verification** | `/api/license/verify.php` |
| **Email Change** | `/api/license/change_email.php` |
| **Account Info** | `/api/account/info.php` |
| **Token Acquisition** | `/api/checker/get-imagen4-token.php` |
| **Product Packages** | `/api/payment/packages.php` |
| **Order Creation** | `/api/payment/create_order.php` |
| **Report Usage** | `/api/resource/report-imagen-counter.php` |

## 4. Brand Identifiers
The tool supports multiple white-label brands. The current configuration uses:
- **Brand**: `imagen4`
- **Sub-brands**: `anhnhanh`, `nhanly`, `phucanhimage`, `phucbani`, `vantheimage`.

## 5. Security & Observations
- The tool uses **Hardware Spoofing** protection by sending HWID, CPU ID, and UUID during license requests.
- **Verification**: It checks for license validity on startup and before fetching image generation tokens.
