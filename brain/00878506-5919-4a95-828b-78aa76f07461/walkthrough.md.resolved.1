# VeoApp Architecture Analysis

## Working App (veoapp.asar v2.3.3)

### Structure
- **Entry Point**: [main.js](file:///C:/Users/hp/.gemini/antigravity/scratch/veoapp_extracted/dist-electron/main.js) → imports bundled [main-CHQQFXN8.js](file:///C:/Users/hp/.gemini/antigravity/scratch/veoapp_extracted/dist-electron/main-CHQQFXN8.js) (~10MB)
- **Architecture**: ES Modules, bundled with Vite
- **API Calls**: Direct axios to Google APIs
- **reCAPTCHA**: Uses `getRecaptchaService()` with Puppeteer/Selenium

### Key API Endpoints
| Endpoint | Function |
|----------|----------|
| `https://labs.google/fx/api/trpc/project.createProject` | Create project |
| `https://aisandbox-pa.googleapis.com/v1/:uploadUserImage` | Upload image |
| `https://aisandbox-pa.googleapis.com/v1/video:batchAsyncGenerateVideoStartImage` | Generate video |
| `https://aisandbox-pa.googleapis.com/v1/video:batchAsyncGenerateVideoText` | Text-to-video |
| `https://aisandbox-pa.googleapis.com/v1/video:batchCheckAsyncVideoGenerationStatus` | Check status |

### No License Check
- **No `SECRET_CONFIG`** - không có license verification
- **No backend auth** - sử dụng Google cookies trực tiếp

---

## Target App (v1.2.1)

### Structure  
- **Entry Point**: Obfuscated [main.js](file:///C:/Users/hp/.gemini/antigravity/scratch/veoapp_extracted/dist-electron/main.js)
- **Architecture**: CommonJS với separate service files
- **Services**: [tokenManager.js](file:///D:/14012026Veo%20Automation%20Setup%201.2.1/$PLUGINSDIR/Filegocdeupdate/Super%20Tools%20Veo%20Automation%20%28pass%20123%29/Veo%20Automation/resources/app/dist-electron/services/tokenManager.js), [flowVideo.js](file:///D:/14012026Veo%20Automation%20Setup%201.2.1/$PLUGINSDIR/Filegocdeupdate/Super%20Tools%20Veo%20Automation%20%28pass%20123%29/Veo%20Automation/resources/app/dist-electron/services/flowVideo.js), [flowImage.js](file:///D:/14012026Veo%20Automation%20Setup%201.2.1/$PLUGINSDIR/Filegocdeupdate/Super%20Tools%20Veo%20Automation%20%28pass%20123%29/Veo%20Automation/resources/app/dist-electron/services/flowImage.js)
- **API Calls**: Through `mimicApiCall` in Electron window

### Issue
- Requires `global.SECRET_CONFIG` with `apiEndpoint`
- License check fails → "Unauthorized: Invalid License"

---

## Key Difference

| Feature | veoapp v2.3.3 | Target v1.2.1 |
|---------|--------------|---------------|
| Module System | ES Modules (bundled) | CommonJS (separate) |
| API Client | Direct axios | mimicApiCall via Electron |
| License | None | SECRET_CONFIG required |
| reCAPTCHA | HybridRecaptchaService | TokenManager internal |

## Recommendation

**Option 1**: Use veoapp.asar v2.3.3 directly - it's newer and has no license checks

**Option 2**: If must use v1.2.1, the SECRET_CONFIG patch already applied should work. Test by:
1. Restart the application
2. Login with Google
3. Try generating video/image
