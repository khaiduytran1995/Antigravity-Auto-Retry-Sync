# Puppeteer-Real-Browser Captcha Bypass Integration

## Goal
Replace Selenium-based recaptchaService with puppeteer-real-browser sidecar process for better stealth and anti-detection.

## Current State
- App uses [recaptchaService.js](file:///D:/14012026Veo%20Automation%20Setup%201.2.1/$PLUGINSDIR/Filegocdeupdate/Veo%20Automation/resources/app/dist-electron/services/recaptchaService.js) with Selenium WebDriver in headless mode
- Selenium is detectable and often gets 403 errors
- Need to replace with more stealthy puppeteer-real-browser approach

## Proposed Changes

### 1. Create Sidecar Script
#### [NEW] `capture-sidecar.js`
Place in `dist-electron/scripts/`

Copy the user's provided script with minor adaptations:
- Support both VIDEO_GENERATION and IMAGE_GENERATION actions
- Add IPC communication via stdin/stdout
- Persistent browser instance

---

### 2. Modify recaptchaService.js
#### [MODIFY] [recaptchaService.js](file:///D:/14012026Veo%20Automation%20Setup%201.2.1/$PLUGINSDIR/Filegocdeupdate/Veo%20Automation/resources/app/dist-electron/services/recaptchaService.js)

Replace Selenium pool with sidecar process manager:
- Spawn `capture-sidecar.js` as child process
- Communicate via stdin/stdout JSON
- Handle process lifecycle (start, restart, shutdown)
- Support multiple actions (video/image generation)

**Key interface:**
```javascript
class PuppeteerSidecarService {
  async start()           // Spawn sidecar process
  async getToken(cookie, action)  // Get recaptcha token
  async restart()         // Force restart browser
  async shutdown()        // Clean shutdown
}
```

---

### 3. Update Dependencies
Add `puppeteer-real-browser` to package.json.

---

## Verification Plan
1. Start app and check if sidecar spawns successfully
2. Login with Google account
3. Generate image → check if token works
4. Generate video → check if token works
5. Monitor console for 403 errors
