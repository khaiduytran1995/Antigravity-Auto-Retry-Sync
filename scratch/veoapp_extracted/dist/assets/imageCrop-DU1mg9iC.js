async function t(t,e="9:16"){return new Promise((a,o)=>{const r=new Image;r.onload=()=>{try{const t=document.createElement("canvas"),o=t.getContext("2d");if(!o)throw new Error("Cannot get canvas context");const n=r.width,d=r.height;let c,h,s;"16:9"===e?(c=1920,h=1080,s=16/9):"9:16"===e?(c=1080,h=1920,s=9/16):(c=1080,h=1080,s=1),t.width=c,t.height=h,o.fillStyle="#000000",o.fillRect(0,0,c,h);const i=n/d;let g,l,m,u;Math.abs(i-s)<.01?(g=c,l=h,m=0,u=0):i>s?(l=h,g=Math.round(h*i),m=Math.round((c-g)/2),u=0,g<c&&(g=c,l=Math.round(c/i),m=0,u=Math.round((h-l)/2))):(g=c,l=Math.round(c/i),m=0,u=Math.round((h-l)/2),l<h&&(l=h,g=Math.round(h*i),m=Math.round((c-g)/2),u=0)),o.drawImage(r,0,0,n,d,m,u,g,l);const w=t.toDataURL("image/jpeg",.95);t.remove(),a(w)}catch(t){o(new Error(`Failed to crop image: ${t.message}`))}},r.onerror=()=>{o(new Error("Failed to load image"))},t.startsWith("data:")?r.src=t:r.src=`data:image/jpeg;base64,${t}`})}export{t as cropImageToAspectRatio};
