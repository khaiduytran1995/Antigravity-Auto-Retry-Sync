import{V as e}from"./index-9w-QImJ4.js";const t=async(t,s,o,r=()=>{})=>{const a=new e(s,o);try{const e=await a.createProject(t);return r(`‚úì Created VEO3 project: ${t}`),e.projectId}catch(n){const e=n.message||JSON.stringify(n);n.message||JSON.stringify(n);throw n.response,r(`‚ùå Project creation error: ${e}`),n}},s=async(t,s,o,r,a,n,i,c=()=>{})=>{var d;const g=new e(n,i);try{const e=s.startsWith("data:")?s:`data:${o};base64,${s}`;c("üñºÔ∏è Uploading image...");const n=await g.uploadUserImage(e,a);c("‚úÖ Image uploaded successfully"),c("üé¨ Starting video generation...");const{operations:i}=await g.generateVideosFromImage(t,n.mediaGenerationId,r,1,a);let l=0,E="";const S=await g.pollVideoStatus(i,{interval:5e3,onProgress:e=>{l++;const t=e.operations[0],s={MEDIA_GENERATION_STATUS_PENDING:"Pending",MEDIA_GENERATION_STATUS_ACTIVE:"Processing",MEDIA_GENERATION_STATUS_SUCCESSFUL:"Completed",MEDIA_GENERATION_STATUS_FAILED:"Failed"}[t.status]||t.status;s===E&&l%3!=0||(c(`üîÑ ${s} (${5*l}s)`),E=s)}}),I=g.extractVideoUrls(S);if(!(null==(d=I[0])?void 0:d.videoUrl))throw new Error("No video URL found in response");return c("‚úÖ Video generation completed successfully"),I[0].videoUrl}catch(l){const e=l.message||JSON.stringify(l);l.message||JSON.stringify(l);throw l.response,c(`‚ùå Error: ${e}`),l}};export{t as createVeo3Project,s as generateVideoFromImageWithProject};
